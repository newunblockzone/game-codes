try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d01adfb6-4cf5-4a15-97f0-a09f732e4214",e._sentryDebugIdIdentifier="sentry-dbid-d01adfb6-4cf5-4a15-97f0-a09f732e4214")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8813],{3911:e=>{e.exports={RosebudBadge:"page_RosebudBadge__S4Bxw",fadeAndScaleIn:"page_fadeAndScaleIn__PR27I",fadeAndScaleOut:"page_fadeAndScaleOut__j4G17"}},13682:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6874,23)),Promise.resolve().then(n.t.bind(n,33063,23)),Promise.resolve().then(n.t.bind(n,3911,23)),Promise.resolve().then(n.bind(n,63978)),Promise.resolve().then(n.bind(n,54477))},17760:(e,t,n)=>{"use strict";n.d(t,{E:()=>a,_:()=>s});let s="Clone and remix your own project",a="The creator has disabled remixing on this project"},34558:e=>{e.exports={ProjectInfoContainer:"BrandedCanvas_ProjectInfoContainer__HeVdY",ProjectInfo:"BrandedCanvas_ProjectInfo__8_wUp",TitleContainer:"BrandedCanvas_TitleContainer__iP9CM",OgpButtonsContainer:"BrandedCanvas_OgpButtonsContainer__jnS4k",ProjectInfoButton:"BrandedCanvas_ProjectInfoButton__sidOE",fadeAndScaleIn:"BrandedCanvas_fadeAndScaleIn__iLUiX",fadeAndScaleOut:"BrandedCanvas_fadeAndScaleOut__Uxxkg"}},42520:(e,t,n)=>{"use strict";n.d(t,{wu:()=>A,EV:()=>T,ef:()=>m,eL:()=>j,YC:()=>g,if:()=>E,NB:()=>v,f3:()=>_,tL:()=>f,bU:()=>p,uT:()=>S,tz:()=>x,gd:()=>y});var s=n(26715),a=n(5041),r=n(99145),i=n(52020),l=n(95838),o=n(59362),d=n(70689);let u=e=>{let t=(0,a.n)(e);return{...t,mutate:(e,n)=>{t.isPending?console.warn("Mutation already in progress. Skipping duplicate request."):t.mutate(e,n)}}};var c=n(88248);let E=e=>{let{onMutate:t,onSuccess:n,onSettled:r}=e,i=(0,s.jE)(),{setOpen:l,setContent:u}=(0,d.s)();return(0,a.n)({mutationKey:["assets","generate"],mutationFn:c.Ii,onMutate:t,onSuccess:e=>{let t=i.getQueryData(["assets",{ordering:"-created"}])||[];i.setQueryData(["assets",{ordering:"-created"}],[e,...t]),null==n||n(e)},onError:e=>{l(!0);let t=e.message;if((0,o.F0)(e)){var n,s,a,r,i,d,c,E;(null==(s=e.response)||null==(n=s.data)?void 0:n.detail)?t=null==(d=e.response)||null==(i=d.data)?void 0:i.detail:(null==(r=e.response)||null==(a=r.data)?void 0:a.text)&&(t=null==(E=e.response)||null==(c=E.data)?void 0:c.text)}u({title:"Asset generation failed.",body:t})},onSettled:()=>{i.invalidateQueries({queryKey:["assets"]}),null==r||r()}})},_=()=>{let e=(0,s.jE)(),{setOpen:t,setContent:n}=(0,d.s)();return u({mutationFn:c.BL,onError:e=>{var s;let a=null==(s=e.response)?void 0:s.status;t(!0),n({title:"Error!",body:403===a?"You do not have permissions to clone this project. It is likely that the creator has disabled remixing.":"Failed to create project. Please try again later and let us know if the issue persists."})},onSettled:()=>{e.invalidateQueries({queryKey:["projects"]}),e.invalidateQueries({queryKey:["assets"]})}})},A=()=>{let e=(0,s.jE)(),{setOpen:t,setContent:n}=(0,d.s)();return(0,a.n)({mutationFn:async e=>{let{projectId:t,assetId:n}=e;return await (0,c._5)(t,n)},onError:e=>{t(!0);let s=e.message;if((0,o.F0)(e)){var a,r,i,l,d,u,c,E;(null==(r=e.response)||null==(a=r.data)?void 0:a.detail)?s=null==(u=e.response)||null==(d=u.data)?void 0:d.detail:(null==(l=e.response)||null==(i=l.data)?void 0:i.text)&&(s=null==(E=e.response)||null==(c=E.data)?void 0:c.text)}n({title:"Failed to add asset to project",body:s})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]}),e.invalidateQueries({queryKey:["assets"]})}})},S=()=>{let e=(0,s.jE)(),{setOpen:t,setContent:n}=(0,d.s)();return(0,a.n)({mutationFn:async e=>{let{projectId:t,assetId:n}=e;return await (0,c.Y7)(t,n)},onError:e=>{t(!0);let s=e.message;if((0,o.F0)(e)){var a,r,i,l,d,u,c,E;(null==(r=e.response)||null==(a=r.data)?void 0:a.detail)?s=null==(u=e.response)||null==(d=u.data)?void 0:d.detail:(null==(l=e.response)||null==(i=l.data)?void 0:i.text)&&(s=null==(E=e.response)||null==(c=E.data)?void 0:c.text)}n({title:"Failed to remove asset from project",body:s})},onSuccess:()=>{e.invalidateQueries({queryKey:["projects"]}),e.invalidateQueries({queryKey:["assets"]})}})},f=()=>{let e=(0,s.jE)();return(0,a.n)({mutationFn:c.rU,onSettled:()=>{e.invalidateQueries({queryKey:["published-projects"]})}})},p=(e,t)=>{let n=t?t.next:null,s=t?{pageParams:[1],pages:[{count:t.count,next:n,previous:null,results:t.results}]}:void 0;return(0,r.q)({queryKey:["published-projects",e],queryFn:t=>{let{pageParam:n}=t;return(0,c.kY)({...e,page:n})},initialPageParam:1,getNextPageParam:e=>{if(e.next){let t=new URL(e.next).searchParams.get("page");return t?parseInt(t,10):void 0}},staleTime:3e5,initialData:s})},h={ordering:"-created",search:"",page_size:25},v=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e={...h,...e},(0,r.q)({queryKey:["assets",e],queryFn:t=>{let{pageParam:n}=t;return(0,c.NH)({page:n,...e})},initialPageParam:1,getNextPageParam:e=>{if(e.next){let t=new URL(e.next).searchParams.get("page");return t?parseInt(t,10):void 0}},placeholderData:i.rX,enabled:t})},T=e=>(0,l.I)({queryKey:["asset-generation-models",e],queryFn:()=>(0,c.sM)(e)}),m=()=>{let e=(0,s.jE)();return(0,a.n)({mutationKey:["chats","create"],mutationFn:c.RL,onSuccess:()=>e.invalidateQueries({queryKey:["chats"]})})},y=function(){let{onSettled:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.jE)();return(0,a.n)({mutationKey:["revisions","update"],mutationFn:c.tK,onSuccess:()=>t.invalidateQueries({queryKey:["revisions"]}),onSettled:e})},g=()=>{let e=(0,s.jE)();return(0,a.n)({mutationKey:["revisions","delete"],mutationFn:c.ln,onSettled:()=>{e.invalidateQueries({queryKey:["revisions"]}),e.invalidateQueries({queryKey:["projects"]})}})},j=()=>{let e=(0,s.jE)();return(0,a.n)({mutationKey:["files","create"],mutationFn:c.Uf,onSuccess:t=>{e.invalidateQueries({queryKey:["files",{revision:t.revision}]})}})},x=()=>{let e=(0,s.jE)();return(0,a.n)({mutationKey:["files","update"],mutationFn:c.V1,onSuccess:t=>{e.invalidateQueries({queryKey:["files",{revision:t.revision}]}),e.invalidateQueries({queryKey:["files",t.id]})}})}},47666:e=>{e.exports={Root:"BloomBackground_Root__OBMbk",BloomEffect:"BloomBackground_BloomEffect__jkQ4B",NoiseOverlay:"BloomBackground_NoiseOverlay__bDvRd",fadeAndScaleIn:"BloomBackground_fadeAndScaleIn__WcNvY",fadeAndScaleOut:"BloomBackground_fadeAndScaleOut__0BX0t"}},54477:(e,t,n)=>{"use strict";n.d(t,{default:()=>j});var s=n(95155),a=n(89613),r=n(35695),i=n(12115),l=n(42520),o=n(95959),d=n(79814),u=n(86230),c=n.n(u),E=n(17760),_=n(80757),A=n(29361),S=n(34558),f=n.n(S),p=n(62605),h=n(52596),v=n(66766),T=n(63978),m=n(70185),y=n.n(m);function g(e){let{show:t}=e,n=(0,i.useRef)(null),[a,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=n.current,t=e=>{"opacity"===e.propertyName&&r(!0)};return null==e||e.addEventListener("transitionend",t),()=>{null==e||e.removeEventListener("transitionend",t)}},[t]),a?null:(0,s.jsxs)("div",{ref:n,className:(0,h.A)(y().SplashScreen,!t&&y().hiding),children:[(0,s.jsx)(v.default,{src:T.default,alt:"Rosebud Logo",width:100,height:100}),(0,s.jsx)("div",{className:y().LoadingText,children:"Loading"})]})}function j(e){let{name:t,description:n,mode:u,files:S,creatorId:h,creatorUsername:v,sourceProjectName:T,sourceProjectId:m,projectId:y,enableRemixButton:j}=e,{requireSignIn:x,user:I}=(0,_.As)(),[C,b]=(0,i.useState)(!0),[R,P]=(0,i.useState)(0),[M,B]=(0,i.useState)(0),O=(0,l.f3)(),{mutate:L}=(0,l.tL)(),{listPoints:N,listRewards:D,claimRewards:w}=(0,A.O$)(null==I?void 0:I.id,null==I?void 0:I.is_anonymous,y),G=(0,r.useRouter)(),F=(0,i.useRef)(!1);(0,i.useEffect)(()=>{F.current||(L({project:y}),F.current=!0)},[L,y]);let U=j||h===(null==I?void 0:I.id),H=(0,s.jsx)(a.Kq,{children:(0,s.jsxs)(a.bL,{delayDuration:500,children:[(0,s.jsx)(a.l9,{asChild:!0,children:(0,s.jsxs)("button",{className:f().ProjectInfoButton,onClick:function(){x({callbackIfSignedIn:async()=>{let e=await O.mutateAsync(y);G.push("/edit/".concat(e.id))}})},disabled:O.isPending||!U,children:[(0,s.jsx)(o.A,{}),O.isPending?"Remixing...":"Remix"]})}),(0,s.jsx)(a.ZL,{children:(0,s.jsxs)(a.UC,{className:c().Tooltip,sideOffset:5,side:"bottom",children:[(0,s.jsx)("p",{children:U?E._:E.E}),(0,s.jsx)(a.i3,{className:c().TooltipArrow})]})})]})});async function k(){let e=await N();e&&P(e)}async function K(){let e=await D();e&&B(e)}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{show:C}),(0,s.jsx)(p.default,{files:S,projectId:y,mode:u,onScriptsLoaded:()=>b(!1)}),(0,s.jsxs)("footer",{className:f().ProjectInfoContainer,children:[(0,s.jsx)(d.A,{}),(0,s.jsxs)("section",{className:f().ProjectInfo,children:[(0,s.jsxs)("div",{className:f().TitleContainer,children:[(0,s.jsx)("h1",{children:t}),H]}),(0,s.jsx)("h2",{children:"Description"}),(0,s.jsx)("p",{children:n}),(0,s.jsx)("h2",{children:"Created By"}),(0,s.jsx)("p",{children:v}),m&&T&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Remixed from"}),(0,s.jsx)("a",{href:"#",onClick:function(){window.open("/p/".concat(m),"_blank")},children:T})]}),A.Nb.includes(y)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h2",{children:"Open Game Protocol"}),(0,s.jsxs)("div",{className:f().OgpButtonsContainer,children:[(0,s.jsx)("button",{className:f().ProjectInfoButton,onClick:k,children:"Check Points [".concat(R,"]")}),(0,s.jsx)("button",{className:f().ProjectInfoButton,onClick:K,children:"Check Rewards [".concat(M,"]")}),(0,s.jsx)("button",{className:f().ProjectInfoButton,onClick:w,children:"Claim Rewards"})]})]})]})]})]})}},62605:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var s=n(95155),a=n(95152),r=n(90200),i=n(43614);function l(e){let{files:t,projectId:n,mode:l,onScriptsLoaded:o}=e,d=(0,i.B)(l);return"esm-react"===d?(0,s.jsx)(r.A,{files:t,projectId:n,canvasType:d,onScriptsLoaded:o,showFullScreenButton:!1}):(0,s.jsx)(a.A,{file:t[0],projectId:n,canvasType:d,onScriptsLoaded:o,showFullScreenButton:!1})}},63978:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});let s={src:"/_next/static/media/rosebud-icon.c85b2e50.png",height:128,width:128,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEVMaXHmEjL/MEP0GDb/Vl//Hyr4KD7pEzT9MkT5Jz3+aG7/gID/WGL/eHntSFjjGzr5Y2r7Nkf5OUrvHDf/e3vzITneCy/ZBi7/h4f4JDz/XGb/L0X1FTb/Hjz9KD0B2DBLAAAAGnRSTlMAmbLaxQlTz9HHzQVFaJ+Mi+CT9SNz9XQi2wXB1kUAAAAJcEhZcwAACxMAAAsTAQCanBgAAABBSURBVHicBcEFEoAwEACxrXFV3KbC/59JArh1cQDTFsVMoIYGXWekK9ibEPr9XEcX/DeMb80TawjWVstbUs6pnD9ZJAL2Syoh8gAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},66977:(e,t,n)=>{"use strict";n.d(t,{Go:()=>i,Kt:()=>s,PW:()=>a,XJ:()=>o,sy:()=>d,xZ:()=>r});var s=function(e){return e.PHASER="Phaser",e.BABYLON="Babylon",e.VOXEL="Voxel",e.THREEJS="ThreeJS",e.REACT="React",e.MULTIFILE="Multifile",e}({}),a=function(e){return e.Asset2DSD="asset-2d-dreambooth",e.Asset2DSDXL="asset-2d-sdxl",e.Asset3DShape="asset-3d-shape",e.Asset3DVoxel="asset-3d-voxel",e.AssetDummy="asset-2d-dummy",e.AssetSkybox="asset-skybox",e}({}),r=function(e){return e.CHARACTER_LLM_CALL="character_llm_call",e.SUBMIT_PROMPT_CALL="submit_prompt_call",e.SUBMIT_PROMPT_CALL_LOWTIER="submit_prompt_call_lowtier",e.UNREMIXABLE_PROJECTS="unremixable_projects",e.DEPLOY_APP="deploy_app",e.EXPORT_APP="export_app",e.VIEW_CODE="view_code",e}({}),i=function(e){return e.LEGACY="LEGACY",e.USER_CHAT_MESSAGE="USER_CHAT_MESSAGE",e.ASSISTANT_CHAT_MESSAGE="ASSISTANT_CHAT_MESSAGE",e.INTENT_ASSIGNMENT="INTENT_ASSIGNMENT",e.CODE_GENERATION_MESSAGE="CODE_GENERATION_MESSAGE",e.MULTIFILE_CODE_GENERATION_MESSAGE="MULTIFILE_CODE_GENERATION_MESSAGE",e}({}),l=function(e){return e.ASSET="ASSET",e.CHAT="CHAT",e.EDIT="EDIT",e}(l||{}),o=function(e){return e.USER_MESSAGE="USER_MESSAGE",e.MESSAGE_CREATE="MESSAGE_CREATE",e.MESSAGE_UPDATE="MESSAGE_UPDATE",e.COMMIT_CREATE="COMMIT_CREATE",e.COMMIT_UPDATE="COMMIT_UPDATE",e.OPTIMISTIC_MESSAGE_UPDATE="OPTIMISTIC_MESSAGE_UPDATE",e.EXCEPTION="EXCEPTION",e.TUTORIAL_MESSAGE="TUTORIAL_MESSAGE",e.PROJECT_UPDATE="PROJECT_UPDATE",e.NEW_ASSET_MESSAGE="NEW_ASSET_MESSAGE",e}({}),d=function(e){return e.ACTIVE="ACTIVE",e.CLOSED="CLOSED",e.CANCELLED="CANCELLED",e.ERRORED="ERRORED",e}({})},70185:e=>{e.exports={SplashScreen:"RosebudSplashScreen_SplashScreen__2VWWL",hiding:"RosebudSplashScreen_hiding__fHEfh",LoadingText:"RosebudSplashScreen_LoadingText__oo8Dr",fadeIn:"RosebudSplashScreen_fadeIn__684pZ",pulse:"RosebudSplashScreen_pulse__LP1yi",fadeAndScaleIn:"RosebudSplashScreen_fadeAndScaleIn__xHEXr",fadeAndScaleOut:"RosebudSplashScreen_fadeAndScaleOut__Sobt7"}},79814:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var s=n(95155),a=n(12115),r=n(47666),i=n.n(r);function l(){let e=(0,a.useId)();return(0,s.jsxs)("div",{className:i().Root,children:[(0,s.jsx)("div",{className:i().BloomEffect}),(0,s.jsxs)("svg",{className:i().NoiseOverlay,width:"100%",height:"100%",children:[(0,s.jsxs)("filter",{id:"noise-".concat(e),children:[(0,s.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"0.6",numOctaves:"3",stitchTiles:"stitch"}),(0,s.jsxs)("feComponentTransfer",{children:[(0,s.jsx)("feFuncR",{type:"linear",slope:"0.05"}),(0,s.jsx)("feFuncG",{type:"linear",slope:"0.05"}),(0,s.jsx)("feFuncB",{type:"linear",slope:"0.05"})]})]}),(0,s.jsx)("rect",{width:"100%",height:"100%",filter:"url(#noise-".concat(e,")")})]})]})}},80757:(e,t,n)=>{"use strict";n.d(t,{As:()=>a.A,lB:()=>s.l});var s=n(86786),a=n(69740);n(91992),n(11389)},86230:e=>{e.exports={Tooltip:"Tooltip_Tooltip__kY3l_",DynamicWidth:"Tooltip_DynamicWidth__8omZY",TooltipArrow:"Tooltip_TooltipArrow__MoHLo",fadeAndScaleIn:"Tooltip_fadeAndScaleIn__I92b_",fadeAndScaleOut:"Tooltip_fadeAndScaleOut__0vkR0"}},95959:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var s,a,r=n(12115);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(null,arguments)}let l=function(e){return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:16,height:17,fill:"none",viewBox:"0 0 16 17"},e),s||(s=r.createElement("path",{fill:"#FAFEAE",fillRule:"evenodd",d:"M2.364 16.092H1.182V14.91H0v-1.182h1.182v-1.182h1.182v1.182h12.454v1.182H2.364zM16 13.728h-1.182V9H16z",clipRule:"evenodd"})),a||(a=r.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M14.818 0h-1.182v1.182H1.182v1.181h12.454v1.182h1.182V2.363H16V1.182h-1.182zM1.182 2.364H0v4.728h1.182zM8.727 4H7.545v3.545H4v1.182h3.545v3.546h1.182V8.727h3.546V7.545H8.727zM2.364 16.092H1.182V14.91H0v-1.182h1.182v-1.182h1.182v1.182h12.454v1.182H2.364zM16 13.728h-1.182V9H16z",clipRule:"evenodd"})))}}},e=>{var t=t=>e(e.s=t);e.O(0,[6128,1060,4,9118,9960,3063,6265,5152,8684,5827,9740,1622,4850,8441,2532,7358],()=>t(13682)),_N_E=e.O()}]);